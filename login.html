<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="css/styles.css">
    <title>Wochenbericht</title>
</head>

<body>
    <div>
        <select class="typeChanger" name="type" id="type">
            <option selected value="auszubildender">Auszubildender</option>
            <option value="ausbilder">Ausbilder</option>
        </select>

        <div class="app-title">
            <h1>Wochenberichte</h1>
        </div>

        <form class="login-form" onsubmit="handleLogin(event)">
            <label for="login-email">E-Mail</label>
            <input type="text" value="" id="login-email" name="login-email">
            <p class="errorLabel" id="error-message-login-email" style="display: none">E-Mail ist falsch</p>

            <label for="login-pass">Passwort</label>
            <input type="password" value="" id="login-pass" name="login-pass">
            <p class="errorLabel" id="error-message-login-pass" style="display: none">Passwort ist falsch</p>

            <input class="button" type="submit" value="Anmelden">
            <a class="link" href="#">Passwort vergessen?</a>
        </form>
    </div>
</body>

<script>
    function handleLogin(e) {
        e.preventDefault();

        const emailInput = e.target.elements["login-email"];
        const passwordInput = e.target.elements["login-pass"];

        const email = emailInput.value;
        const password = passwordInput.value;

        if (email !== "test@example.com") {
            changeElementToWrongState(emailInput);
            triggerInputResetOnChange(emailInput);
        } else if (password !== "Password") {
            changeElementToWrongState(passwordInput);
            triggerInputResetOnChange(passwordInput);
        } else {
            window.location.href = "Landingpage/landing.html";
        }
    }

    function triggerInputResetOnChange(element) {
        element.addEventListener("input", function() {
            changeElementToNormalState(element);
        });
    }

    function changeElementToWrongState(element) {
        element.style.borderColor = 'red';
        element.style.backgroundColor = '#ffebee';

        label = getLabelElement(element);

        label.style = '';
    }

    function changeElementToNormalState(element) {
        element.style.borderColor = '';
        element.style.backgroundColor = '';

        label = getLabelElement(element);

        label.style = 'display: none';

        element.removeEventListener("input", function() {
            changeElementToNormalState(element);
        });
    }

    function getLabelElement(element) {
        labelId = "error-message-" + element.id;
        return document.getElementById(labelId);
    }
</script>    

<style>
    body {
        position: absolute;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: auto;
        height: 100%;
        width: 100%;
    }

    .app-title {
        text-align: center;
    }

    .login-form {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
    }

    .button {
        display: flex;
        border: solid rgb(35, 47, 55);
        border-radius: 5px;
        color: white;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        cursor: pointer;
        color: white;
        background-color: rgb(35, 47, 55);
        margin-left: .3em;
        margin-right: .3em;
        height: 2em;
        margin-top: 1em;
        margin-bottom: 1em;
    }

    .link {
        color: black;
    }

    select {
        background-color: white;
        color: none;
        border: none;
    }

    .typeChanger {
        position: absolute;
        left: 3vw;
        top: 3vh;
        font-size: 1.5em;
    }

    label {
        margin: .3em;
    }

    .errorLabel {
        color: red;
        font-size: 1em;
        margin-top: auto;
        margin-bottom: auto;
    }

</style>